# Changelog

## 1.0.0 (2023-12-04)


### âš  BREAKING CHANGES

* rename `query` to `loadQuery`
* replace `setServerDraftMode ` with `perspective` on `query`
* remove `startTransition` option
* `initialData` and `initialSourceMap` are now grouped by `initial`
* lazy load live mode ([#281](https://github.com/sanity-io/visual-editing/issues/281))
* renamed `studioUrl` to `allowStudioOrigin`to clarify it's CORS related

### Features

* add `/rsc` export for app router and React Server Components ([309756f](https://github.com/sanity-io/visual-editing/commit/309756f21e9098badc879affbec0e68a836fb9d3))
* add `debugSecrets`  studio plugin that lets you easily see the generated url secrets in your dataset ([86ab7aa](https://github.com/sanity-io/visual-editing/commit/86ab7aaaa4a1edee4ac915f4b81c1a678bc14612))
* add `definePreviewUrl` API ([c141b74](https://github.com/sanity-io/visual-editing/commit/c141b74b61d93623682a679ecf2614f0886f3939))
* add `encodeDataAttribute` API ([d9179f3](https://github.com/sanity-io/visual-editing/commit/d9179f30ab0defb1539d589a24c230683cce9c4e))
* add `getRedirectTo` utility ([03591b5](https://github.com/sanity-io/visual-editing/commit/03591b50d60675d3d1a0eed1b66c7e528a63a1b7))
* add `query` API for React SSR ([e86ce61](https://github.com/sanity-io/visual-editing/commit/e86ce6151d21ce12a302d62c8346035eb78cdfc3))
* add `setServerDraftMode` API ([9c5dd76](https://github.com/sanity-io/visual-editing/commit/9c5dd7606cd099566052d678ea47d8b7354189e9))
* add placeholder package ([89b7dca](https://github.com/sanity-io/visual-editing/commit/89b7dca999671c543d24ade76bc28996c04475bb))
* add support for async resolving `previewUrl` ([ca3d3c6](https://github.com/sanity-io/visual-editing/commit/ca3d3c6e5fe3cbe17f7a9df837df3b62574f6dda))
* expose `unstable__cache` API for SSR ([9300036](https://github.com/sanity-io/visual-editing/commit/9300036adcdb6a7de60cfafaab58fed67c558200))
* expose resolvers ([#199](https://github.com/sanity-io/visual-editing/issues/199)) ([b96ede1](https://github.com/sanity-io/visual-editing/commit/b96ede10313781ae4e4f5683a3969ed97171176c))
* first mvp of Draft Mode handling ([e7d49f4](https://github.com/sanity-io/visual-editing/commit/e7d49f4a1f5069252a48d99de86bae5ea148881c))
* generate secrets on demand ([9b47760](https://github.com/sanity-io/visual-editing/commit/9b477607edc2f3b89e03e0c64c9f7a92687f7c25))
* **nuxt-loader:** align APIs, use useAsyncData for fetching ([#435](https://github.com/sanity-io/visual-editing/issues/435)) ([e195607](https://github.com/sanity-io/visual-editing/commit/e1956071982943978f3e10924fd5e799736d3e91))
* **overlays:** toggle overlay using mod key ([#228](https://github.com/sanity-io/visual-editing/issues/228)) ([60484e1](https://github.com/sanity-io/visual-editing/commit/60484e1458fdc9f85071cdbca2afc0978fae8041))
* **pages:** comments ([#207](https://github.com/sanity-io/visual-editing/issues/207)) ([5d473ff](https://github.com/sanity-io/visual-editing/commit/5d473ff07b9134a57b9297ec297fb79810e20f4f))
* **pages:** resizable panels ([#206](https://github.com/sanity-io/visual-editing/issues/206)) ([15d9719](https://github.com/sanity-io/visual-editing/commit/15d97198223b23d349795791241ee759333907fb))
* **presentation:** add 'Open in Desk' action ([d989723](https://github.com/sanity-io/visual-editing/commit/d989723bcbad388a17426cce43ed9ebd58aacd73))
* preserve perspective state in search params ([8425173](https://github.com/sanity-io/visual-editing/commit/8425173ad8535d967447503fd0e64d02483d509f))
* production ready release ([#246](https://github.com/sanity-io/visual-editing/issues/246)) ([993c3cc](https://github.com/sanity-io/visual-editing/commit/993c3cc621921971087053950a1dc88fd9e34762))
* replace `setServerDraftMode ` with `perspective` on `query` ([017d02f](https://github.com/sanity-io/visual-editing/commit/017d02f194fc0fdbd3693e3feec9ea747d3ab81c))
* return when the secret expires ([8f2c1ce](https://github.com/sanity-io/visual-editing/commit/8f2c1ceefcce73728488b2a3db73cbbee21cf34f))
* show an initial loading state in the iframe ([c400b13](https://github.com/sanity-io/visual-editing/commit/c400b13302890514486d7b6b6f7451db7c80f8a5))
* support SSR-only mode ([96d82f2](https://github.com/sanity-io/visual-editing/commit/96d82f2873d358353102181a10913d34949d645f))
* **typings:** only set `data` as optionally `undefined` if `initial.data` isn't provided ([fb24f66](https://github.com/sanity-io/visual-editing/commit/fb24f665fcf8cd8620e405aeb1388895c9ba4ae3))
* use the new `@sanity/client/stega` features ([#252](https://github.com/sanity-io/visual-editing/issues/252)) ([fa08bb2](https://github.com/sanity-io/visual-editing/commit/fa08bb24e6413bfa49adb79df256217e06ed0844))


### Bug Fixes

* `initialData` and `initialSourceMap` are now grouped by `initial` ([30f8cfd](https://github.com/sanity-io/visual-editing/commit/30f8cfdf284c940e5589820e1c72b5c50da17cbd))
* `setNavigate` must be given a function that returns a function ([4b86bcb](https://github.com/sanity-io/visual-editing/commit/4b86bcb283bf89eab67213acd1be6f8ddae2801f))
* add base readmes ([e5f3f70](https://github.com/sanity-io/visual-editing/commit/e5f3f7054090c269a98bc5d5f6ff9572a8c3725b))
* add logs ([7cb9537](https://github.com/sanity-io/visual-editing/commit/7cb9537b496e7a193aad2f24777cf6fcfd565551))
* add missing `showNavigator` const ([3bd936d](https://github.com/sanity-io/visual-editing/commit/3bd936df537a0d6993320507617e010d881d01f4))
* add new placeholder export ([fd68482](https://github.com/sanity-io/visual-editing/commit/fd68482ab3cf0b748623566f32aab254f97bf4ca))
* add path to open-in-new-window button ([62f3726](https://github.com/sanity-io/visual-editing/commit/62f37265f92548014b2459339dc061398c6c0433))
* add README ([3c14ea1](https://github.com/sanity-io/visual-editing/commit/3c14ea1b362d6287f51b6af6d56c896574cd932b))
* add stega focus path debugger ([6ebe692](https://github.com/sanity-io/visual-editing/commit/6ebe692a3754582f40bc0fb7bacfa75915ca42c5))
* add support for `@sanity/preview-kit` ([f57235a](https://github.com/sanity-io/visual-editing/commit/f57235a9e97ce035ac8f5cbc7ecfd670f1919559))
* add types for `cache` and `next` ([399feca](https://github.com/sanity-io/visual-editing/commit/399feca646ccfa50471d5f5a526fe33e72b98674))
* add types for async preview url resolver API ([d9b5ecf](https://github.com/sanity-io/visual-editing/commit/d9b5ecf877011d7b98484086a9d8b8e75072a820))
* add UI for `disconnected` states, improve `unhealthy` UI ([40adc81](https://github.com/sanity-io/visual-editing/commit/40adc81c9c18599c33467148b94155e4d7debf16))
* allow `styled-components` v5.2 ([7ce9a76](https://github.com/sanity-io/visual-editing/commit/7ce9a76fe977c6eb15ebdcebfe507f5b3e5bb99f))
* always bundle private packages ([6be3f74](https://github.com/sanity-io/visual-editing/commit/6be3f7409216c699667d6ac400b4ce3b3a426679))
* **apps:** render warning message ([6ebb73b](https://github.com/sanity-io/visual-editing/commit/6ebb73bfee0c816d80c06bbc5a123be830052726))
* attempt bundling `@sanity/ui` and `styled-components` for hydrogen compat ([b39f58a](https://github.com/sanity-io/visual-editing/commit/b39f58a33e6114be37d69d852b40ff35397d8591))
* bump `@sanity/client` for stega path fixes ([f608f2f](https://github.com/sanity-io/visual-editing/commit/f608f2f51c8cf8f2e4cc409348d1de6dadc64165))
* bundle `valibot` ([6b07f06](https://github.com/sanity-io/visual-editing/commit/6b07f0629d1e70fcce86b22f1a3f8258f1f833c7))
* **CHANGELOG:** restore continuity ([c9f19cd](https://github.com/sanity-io/visual-editing/commit/c9f19cd7d8be297b99f7feb9c678b34822d10c8b))
* click-to-edit links in overlays pass in `preview` params of the current page ([d90ec9e](https://github.com/sanity-io/visual-editing/commit/d90ec9efe79d11f7f5c880c0439090d25dfc42d7))
* **comments:** make comments opt-in ([#453](https://github.com/sanity-io/visual-editing/issues/453)) ([4037820](https://github.com/sanity-io/visual-editing/commit/40378206bd9a5b55563950d64ed6fe2ed9c18d77))
* **deps:** pin dependencies ([#239](https://github.com/sanity-io/visual-editing/issues/239)) ([e1583b9](https://github.com/sanity-io/visual-editing/commit/e1583b99eb45342ffbddb68c1af66b33bc9a25d1))
* **deps:** Update dependency @sanity/client to ^6.8.1 ([#351](https://github.com/sanity-io/visual-editing/issues/351)) ([6efe86f](https://github.com/sanity-io/visual-editing/commit/6efe86f7589ae8e0b2e64e1c5b6c439b5ec5292d))
* **deps:** Update dependency @sanity/client to ^6.8.2 ([#356](https://github.com/sanity-io/visual-editing/issues/356)) ([b80dfa5](https://github.com/sanity-io/visual-editing/commit/b80dfa519c9790efdfdc0590ad7eb3f56998ea01))
* **deps:** Update dependency @sanity/client to ^6.8.4 ([5dbbe06](https://github.com/sanity-io/visual-editing/commit/5dbbe062ac1dd71a251e70d15caa1c5d53a505f6))
* **deps:** Update dependency @sanity/client to ^6.8.5 ([#361](https://github.com/sanity-io/visual-editing/issues/361)) ([e8e61c1](https://github.com/sanity-io/visual-editing/commit/e8e61c1a377b2737db60a1c3e42160794b26ad9b))
* **deps:** update dependency @sanity/client to ^6.8.6 ([#374](https://github.com/sanity-io/visual-editing/issues/374)) ([f62967a](https://github.com/sanity-io/visual-editing/commit/f62967a2068844b358357c7c2254cd1d9228ba6d))
* **deps:** update dependency @sanity/client to ^6.9.0 ([#434](https://github.com/sanity-io/visual-editing/issues/434)) ([c7c8ec5](https://github.com/sanity-io/visual-editing/commit/c7c8ec59e6503060eb60800bac4a494e39c1595c))
* **deps:** update dependency @sanity/client to ^6.9.1 ([#437](https://github.com/sanity-io/visual-editing/issues/437)) ([6974b0d](https://github.com/sanity-io/visual-editing/commit/6974b0d6fabd9911af40f6a1de645473b47df19d))
* **deps:** update dependency @sanity/client to v6.7.1-pink-lizard.0 ([#224](https://github.com/sanity-io/visual-editing/issues/224)) ([937c5cb](https://github.com/sanity-io/visual-editing/commit/937c5cbe290a260c1f0a0dccbab7c46b4ef50767))
* **deps:** update dependency @sanity/client to v6.7.1-pink-lizard.2 ([#251](https://github.com/sanity-io/visual-editing/issues/251)) ([9f66693](https://github.com/sanity-io/visual-editing/commit/9f66693bd2e954f54987e9352f35f3fccab3ad6f))
* **deps:** update dependency @sanity/client to v6.7.1-pink-lizard.5 ([#259](https://github.com/sanity-io/visual-editing/issues/259)) ([8f2f00f](https://github.com/sanity-io/visual-editing/commit/8f2f00faef5a91dd11218b05be4c76da2ec45e0e))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.0 ([#264](https://github.com/sanity-io/visual-editing/issues/264)) ([010b87a](https://github.com/sanity-io/visual-editing/commit/010b87a5afbc3619a3406db405299522456854a2))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.12 ([#298](https://github.com/sanity-io/visual-editing/issues/298)) ([4bfbfff](https://github.com/sanity-io/visual-editing/commit/4bfbfffb8fab9e3440fb525babd2df0120fc4900))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.12 ([#301](https://github.com/sanity-io/visual-editing/issues/301)) ([c939d32](https://github.com/sanity-io/visual-editing/commit/c939d323065a0f9c287174befbb84b0d1dfeb2e6))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.3 ([#267](https://github.com/sanity-io/visual-editing/issues/267)) ([432f47b](https://github.com/sanity-io/visual-editing/commit/432f47bdd742cc863bbeb257325690b0f2063022))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.4 ([#278](https://github.com/sanity-io/visual-editing/issues/278)) ([f9a64c4](https://github.com/sanity-io/visual-editing/commit/f9a64c4f245da1f7beb3052fb205f422ec94221e))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.7 ([#288](https://github.com/sanity-io/visual-editing/issues/288)) ([7d63682](https://github.com/sanity-io/visual-editing/commit/7d63682b533495e75cdcef446e818e10b742329b))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.8 ([#291](https://github.com/sanity-io/visual-editing/issues/291)) ([9623639](https://github.com/sanity-io/visual-editing/commit/9623639ac7c333ee7b13c253a61a7f9d4f9f599a))
* **deps:** update dependency @sanity/client to v6.8.0-pink-lizard.9 ([#295](https://github.com/sanity-io/visual-editing/issues/295)) ([6335f36](https://github.com/sanity-io/visual-editing/commit/6335f36c0c5324499ccbd42256e3a5d317e3a709))
* **deps:** Update dependency @sanity/ui to ^1.9.0 ([#274](https://github.com/sanity-io/visual-editing/issues/274)) ([4b971e3](https://github.com/sanity-io/visual-editing/commit/4b971e38c480322b4041206b5fd6378b01797ca4))
* **deps:** Update dependency @sanity/ui to ^1.9.2 ([#335](https://github.com/sanity-io/visual-editing/issues/335)) ([5b17c77](https://github.com/sanity-io/visual-editing/commit/5b17c7785f748eea4d0dae57e0c906e8bc3f3918))
* **deps:** Update dependency @sanity/ui to ^1.9.3 ([#355](https://github.com/sanity-io/visual-editing/issues/355)) ([e10f6a7](https://github.com/sanity-io/visual-editing/commit/e10f6a79243b040aaba73c94146348f509164064))
* **deps:** Update dependency @types/lodash.isequal to ^4.5.8 ([#276](https://github.com/sanity-io/visual-editing/issues/276)) ([667002d](https://github.com/sanity-io/visual-editing/commit/667002d20ca22e6ef8ccb64a8443e3a288356c60))
* **deps:** update dependency `@sanity/client` to ^6.8.0 ([4e11e0c](https://github.com/sanity-io/visual-editing/commit/4e11e0c1efd01e889c269d6a270b7c761b776fc0))
* **deps:** update dependency `@sanity/client` to v6.8.0-pink-lizard.5 ([c88e4ec](https://github.com/sanity-io/visual-editing/commit/c88e4ec3a12c4dd3d5bac5c3e9c39a52fc698603))
* **deps:** Update dependency framer-motion to ^10.16.10 ([#450](https://github.com/sanity-io/visual-editing/issues/450)) ([3b02279](https://github.com/sanity-io/visual-editing/commit/3b02279ad18c8ddda9ed31e8dde5a4b91fcbecf9))
* **deps:** Update dependency framer-motion to ^10.16.12 ([#456](https://github.com/sanity-io/visual-editing/issues/456)) ([a421f94](https://github.com/sanity-io/visual-editing/commit/a421f94f3710faaadbb8dc342cb02c9e4e3ed71f))
* **deps:** Update dependency framer-motion to ^10.16.5 ([#365](https://github.com/sanity-io/visual-editing/issues/365)) ([f807cf8](https://github.com/sanity-io/visual-editing/commit/f807cf8480b9df9c485d3f4ca5cad2333f72b651))
* **deps:** Update dependency framer-motion to ^10.16.7 ([#439](https://github.com/sanity-io/visual-editing/issues/439)) ([b50d958](https://github.com/sanity-io/visual-editing/commit/b50d958af9d349612d9be43a93248d1b45c220ea))
* **deps:** Update dependency framer-motion to ^10.16.8 ([#445](https://github.com/sanity-io/visual-editing/issues/445)) ([319c3e8](https://github.com/sanity-io/visual-editing/commit/319c3e8cd62f9770f6158c580a86f942eafc1650))
* **deps:** update dependency nanostores to v0.9.5 ([e8a4cef](https://github.com/sanity-io/visual-editing/commit/e8a4cef014a6145c63d25a9116fa51a21824e2b8))
* **deps:** update dependency nuxt to ^3.8.2 ([#451](https://github.com/sanity-io/visual-editing/issues/451)) ([1071dc4](https://github.com/sanity-io/visual-editing/commit/1071dc475c8d94c69b5f844e96c9f453746a8857))
* **deps:** Update dependency styled-components to ^6.1.1 ([#326](https://github.com/sanity-io/visual-editing/issues/326)) ([6b3c65c](https://github.com/sanity-io/visual-editing/commit/6b3c65c94df8b93970601dd208acb7c4f02f2b7e))
* **deps:** Update dependency valibot to ^0.20.0 ([#211](https://github.com/sanity-io/visual-editing/issues/211)) ([8fe3fc1](https://github.com/sanity-io/visual-editing/commit/8fe3fc170533bac3e223c0a4885aa0656c454c2f))
* **deps:** Update dependency valibot to 0.20.1 ([158559e](https://github.com/sanity-io/visual-editing/commit/158559edaa40bd05c10a5be1008f86967e162439))
* **deps:** Update dependency valibot to v0.21.0 ([#401](https://github.com/sanity-io/visual-editing/issues/401)) ([d356978](https://github.com/sanity-io/visual-editing/commit/d356978aab55779575646eb05d78f86868f2e1d4))
* **deps:** Update dependency valibot to v0.22.0 ([#460](https://github.com/sanity-io/visual-editing/issues/460)) ([38de8ae](https://github.com/sanity-io/visual-editing/commit/38de8ae12772f4ff8bec79731efac896be781fae))
* **deps:** Update dependency vue to ^3.3.8 ([#329](https://github.com/sanity-io/visual-editing/issues/329)) ([ca4c1e8](https://github.com/sanity-io/visual-editing/commit/ca4c1e84fadd53fe645a8e57a651b719b97df29e))
* **deps:** Update dependency vue to ^3.3.9 ([#417](https://github.com/sanity-io/visual-editing/issues/417)) ([6f7b66c](https://github.com/sanity-io/visual-editing/commit/6f7b66c4f107ba1ad7eb302fc3cd82e277871f36))
* **deps:** Update sanity monorepo ([#222](https://github.com/sanity-io/visual-editing/issues/222)) ([dec2114](https://github.com/sanity-io/visual-editing/commit/dec2114132de1b98da5a78f92def08a5528528a7))
* **deps:** Update sanity monorepo to ^3.19.3 ([#369](https://github.com/sanity-io/visual-editing/issues/369)) ([24813fa](https://github.com/sanity-io/visual-editing/commit/24813fafa42da329efe4025deed48766ca6c454b))
* **deps:** Update sanity monorepo to ^3.20.0 ([#383](https://github.com/sanity-io/visual-editing/issues/383)) ([22f1ff8](https://github.com/sanity-io/visual-editing/commit/22f1ff8608def7e77efc140200305f063e4e0d34))
* **deps:** Update sanity monorepo to ^3.20.0 ([#391](https://github.com/sanity-io/visual-editing/issues/391)) ([fa3b213](https://github.com/sanity-io/visual-editing/commit/fa3b213b0fd8af94a7fb76bef37629ab8f5ed123))
* **deps:** Update sanity monorepo to ^3.20.1 ([#418](https://github.com/sanity-io/visual-editing/issues/418)) ([b91335b](https://github.com/sanity-io/visual-editing/commit/b91335bb9a02f4ef547decbcf10923f7facb7498))
* **deps:** Update sanity monorepo to ^3.20.2 ([#433](https://github.com/sanity-io/visual-editing/issues/433)) ([d5b60f0](https://github.com/sanity-io/visual-editing/commit/d5b60f06c4c92a251a130bf22af94f8e7ecec3a7))
* **deps:** Update sanity monorepo to v3.18.2-pink-lizard.162 ([#196](https://github.com/sanity-io/visual-editing/issues/196)) ([f2e3aea](https://github.com/sanity-io/visual-editing/commit/f2e3aea88337f9eea2455c882998606384144a1f))
* **deps:** Update sanity monorepo to v3.18.2-pink-lizard.162 ([#197](https://github.com/sanity-io/visual-editing/issues/197)) ([6d962b1](https://github.com/sanity-io/visual-editing/commit/6d962b15f5f876c91cfd8df1856d4ffd8f05d83c))
* **deps:** Update sanity monorepo to v3.18.2-pink-lizard.172 ([#233](https://github.com/sanity-io/visual-editing/issues/233)) ([c5e6c5d](https://github.com/sanity-io/visual-editing/commit/c5e6c5d48f6d1c6b17d97e3845e3da751aef9918))
* **deps:** Update sanity monorepo to v3.19.2-pink-lizard.19 ([#270](https://github.com/sanity-io/visual-editing/issues/270)) ([9bdea72](https://github.com/sanity-io/visual-editing/commit/9bdea72e927f46f029273350a8fb898fa45f0e86))
* **deps:** Update sanity monorepo to v3.19.2-pink-lizard.28 ([#311](https://github.com/sanity-io/visual-editing/issues/311)) ([915953e](https://github.com/sanity-io/visual-editing/commit/915953e2f78fa222ac5fd4c85977dae55ba21371))
* **deps:** Update sanity monorepo to v3.19.3-pink-lizard.10 ([#315](https://github.com/sanity-io/visual-editing/issues/315)) ([4da915e](https://github.com/sanity-io/visual-editing/commit/4da915eaba5d437f6ad70415dc1f3750ac278f4b))
* **deps:** Update sanity monorepo to v3.19.3-pink-lizard.18 ([#318](https://github.com/sanity-io/visual-editing/issues/318)) ([f97a770](https://github.com/sanity-io/visual-editing/commit/f97a770c95b3e76c94592739d8cee5262f6d5f86))
* **deps:** Update sanity monorepo to v3.19.3-pink-lizard.21 ([2bb162c](https://github.com/sanity-io/visual-editing/commit/2bb162cc8b5844ddc927876e8f039b028e4250cc))
* disable "Open In Desk" tool for now ([6ac23e3](https://github.com/sanity-io/visual-editing/commit/6ac23e33960ce59e323a2f7148ad2d304cc008b3))
* disable cache by default ([0fa8e59](https://github.com/sanity-io/visual-editing/commit/0fa8e592bd043b3bad70a8c275cf489dab62b3d7))
* disable stega on verification of url preview secrets ([6426750](https://github.com/sanity-io/visual-editing/commit/64267500b60fe4b0b6c58bcf5e5da9ac7b311f28))
* **docs:** add docs for `encodeDataAttribute` ([0686612](https://github.com/sanity-io/visual-editing/commit/06866126cf019780cce676408a69ac346186c0ec))
* **docs:** remove experimental badges ([874d884](https://github.com/sanity-io/visual-editing/commit/874d884f390d50b70256a6ac6098cb5f81247c53))
* don't bundle `uuid` ([6e11ca5](https://github.com/sanity-io/visual-editing/commit/6e11ca552cc05dc37295900c5aab511ab7b6eef9))
* don't read `location` during render ([f2b0cc7](https://github.com/sanity-io/visual-editing/commit/f2b0cc7ffc7fdcffe7418565b75e857beaff1e37))
* don't set `previewRef.current` until an established connection with frame ([541c30d](https://github.com/sanity-io/visual-editing/commit/541c30dcd31d97b497a52b5e00868c6ca9e4fe58))
* don't show secret url search params in navbar ([4c684f1](https://github.com/sanity-io/visual-editing/commit/4c684f11c981bd0788cc2a8b5f9fcc4c7e9e9693))
* export `encodeSanityNodeData` ([4d78837](https://github.com/sanity-io/visual-editing/commit/4d78837a5d29466ba714eecf50e4b88f1a8b7647))
* export `rsc` correctly ([49f364f](https://github.com/sanity-io/visual-editing/commit/49f364f5531828128e080ffa50a5c42f89ff81de))
* fast path didn't send changed queries over postMessage ([995142f](https://github.com/sanity-io/visual-editing/commit/995142fc8ac1c6a043ff5c7da8e23173d341107b))
* garbage collect expired secrets ([817582b](https://github.com/sanity-io/visual-editing/commit/817582b509d7614162485f71ba38f84e98653157))
* handle bundler issue with importing from `sanity` ([03f45c5](https://github.com/sanity-io/visual-editing/commit/03f45c50c5591322d4b829c06111366f7dd73755))
* handle initial redirect when using draft mode ([e5cd105](https://github.com/sanity-io/visual-editing/commit/e5cd1052cdc98b4c4182d910f588ecf7837a1b45))
* handle stega nodes in a way that supports focus ([#254](https://github.com/sanity-io/visual-editing/issues/254)) ([dce801f](https://github.com/sanity-io/visual-editing/commit/dce801f3b76e6e2bb0597345b5deacc2038e6fec))
* handle turbo charging of fields within arrays ([b2bfc4b](https://github.com/sanity-io/visual-editing/commit/b2bfc4b0932649852cae4d3bb3a26e7c37438e9a))
* implement url validation on the api handler side ([ca0c856](https://github.com/sanity-io/visual-editing/commit/ca0c856637e5c00200e02c708e02814319a9e55f))
* include `sourceMap` on `query()` result ([9f90f04](https://github.com/sanity-io/visual-editing/commit/9f90f048dff17baa1925b63052ef0bce5a462bdd))
* keep preview url in sync (figure out cleaning hidden search params later) ([38912e1](https://github.com/sanity-io/visual-editing/commit/38912e17a86f17e0886aac9ae43dc3aa3299a574))
* lazy load live mode ([#281](https://github.com/sanity-io/visual-editing/issues/281)) ([e52991c](https://github.com/sanity-io/visual-editing/commit/e52991cc974df76647c4ede51de16527c14e6c10))
* listen to document changes directly ([213159e](https://github.com/sanity-io/visual-editing/commit/213159e164f721b316a0cee3f724d1378652a95a))
* load src directly ([94308f0](https://github.com/sanity-io/visual-editing/commit/94308f0ba815d89347c7201eb759cc0ba6e2bbf7))
* make `@sanity/groq-store` a regular dep ([b5b4490](https://github.com/sanity-io/visual-editing/commit/b5b449039002b76a83b5e170d1e2775cbd157989))
* make `allowStudioOrigin` required ([700e140](https://github.com/sanity-io/visual-editing/commit/700e14025d327514152528138501353961034999))
* make nav stay in sync ([d3bea66](https://github.com/sanity-io/visual-editing/commit/d3bea66b50069ee9b244de412133c4e364f8a76d))
* mark API that's not yet implemented ([53c0a33](https://github.com/sanity-io/visual-editing/commit/53c0a339b02ab6f5e7925740eb7ef888c227e2b6))
* migrate to `visual-editing-helpers` ([e8bfae1](https://github.com/sanity-io/visual-editing/commit/e8bfae1dabfdc5017908697ced574bb23daf9f3b))
* move `@sanity/csm` into `visual-editing-helpers` ([257a4ad](https://github.com/sanity-io/visual-editing/commit/257a4adf64dcd74cbf435b883995c6f5b8730c25))
* move peer deps to regular deps ([91489dc](https://github.com/sanity-io/visual-editing/commit/91489dc486f209cdaf618cffb2f0e331b2d9753a))
* only fire documents in use when in frame ([6faf032](https://github.com/sanity-io/visual-editing/commit/6faf032e85aff969b1defafd7ddcf55668ebfd8b))
* only load visual editing when in draft mode ([5314181](https://github.com/sanity-io/visual-editing/commit/5314181de4e5810cbbe321594899a27b5fa8f7ca))
* only poll the active perspective ([8eaf9e6](https://github.com/sanity-io/visual-editing/commit/8eaf9e6d04b3e0802a86042405f309e2aa0063e4))
* only set cache in live mode on a valid connection ([d0d05a5](https://github.com/sanity-io/visual-editing/commit/d0d05a518f5c04c6ff935a595b0b4bc135e5fd0f))
* **overlays:** add `mode=presentation` to intent links ([a838cd8](https://github.com/sanity-io/visual-editing/commit/a838cd8b392f8f74d18463709d7f24a3aac28ed6))
* **overlays:** flash overlays when mounting ([6a9a86d](https://github.com/sanity-io/visual-editing/commit/6a9a86d9eca784dff1ff55686b9b91ca9203f6a9))
* **overlays:** improve element detection in mutation handler ([eda5fbd](https://github.com/sanity-io/visual-editing/commit/eda5fbdcfb0d510569aab42a1233679a5ef60b07))
* **overlays:** only render overlays in iframe if channel is connected ([#411](https://github.com/sanity-io/visual-editing/issues/411)) ([1aa40fc](https://github.com/sanity-io/visual-editing/commit/1aa40fc412d575cffd84a2427072ddade849a3a1))
* **overlays:** use getComputedStyle over computedStyleMap ([#412](https://github.com/sanity-io/visual-editing/issues/412)) ([63398e4](https://github.com/sanity-io/visual-editing/commit/63398e4fa1d4a1e8830964200f15b88e8c0d387a))
* persist history instance ([be689e6](https://github.com/sanity-io/visual-editing/commit/be689e66a3e8ac6287de1042c5e9413672ef5e17))
* prepare release ([f2ce9cb](https://github.com/sanity-io/visual-editing/commit/f2ce9cb4046df2cb7581e66fcad3a5c0631778ae))
* **presenation:** update perspectives copy ([97dabe5](https://github.com/sanity-io/visual-editing/commit/97dabe5180d799b8b98d23eb8b527d4cc2d66368))
* **presentation:** add padding to controls ([4389e1c](https://github.com/sanity-io/visual-editing/commit/4389e1cd144f0f8f98d3ca87a411ba6e0bd2e214))
* **presentation:** complete keyboard implementation ([a931b1b](https://github.com/sanity-io/visual-editing/commit/a931b1b68cf85a17dd1ab8010445313c4d75539a))
* **presentation:** disable responsive mode ([cf70460](https://github.com/sanity-io/visual-editing/commit/cf70460d3ca5e094956d999a380be8ce79fd62b9))
* **presentation:** error card layout ([48d85ab](https://github.com/sanity-io/visual-editing/commit/48d85ab6b8e9ab93ef1948eea8b4a44181d32526))
* **presentation:** handle empty location ([6ea8353](https://github.com/sanity-io/visual-editing/commit/6ea83537df5f3b8162b2fed5f86c1d0281a4de65))
* **presentation:** improve perf by preloading edit state ([#330](https://github.com/sanity-io/visual-editing/issues/330)) ([10a69b9](https://github.com/sanity-io/visual-editing/commit/10a69b9d929f5b012cfbe354e8c3e6744b52154c))
* **presentation:** open preview using `setParams` when in Presentation tool ([7aca6ca](https://github.com/sanity-io/visual-editing/commit/7aca6cac32efa72d9401380d7db53265f8917616))
* **presentation:** preserve current document on initial navigation ([#406](https://github.com/sanity-io/visual-editing/issues/406)) ([1490a75](https://github.com/sanity-io/visual-editing/commit/1490a755c83da6d481ca68e9191444d82ebf8f65))
* **presentation:** prevent iframe from taking focus ([fbd02fd](https://github.com/sanity-io/visual-editing/commit/fbd02fd3b83774546c017a84cf8c444eff5dfe4f))
* **presentation:** prevent scrolling when array items close ([da2ad22](https://github.com/sanity-io/visual-editing/commit/da2ad22c7e825cebdff0dbfa374b65ca3a50e04c))
* **presentation:** prevent unmounting document provider ([56e82cb](https://github.com/sanity-io/visual-editing/commit/56e82cbcb8ebc74c66313970c1663b0bad05abe9))
* **presentation:** remove `useDocumentPane` and re-enable field action ([d0c4382](https://github.com/sanity-io/visual-editing/commit/d0c43824dfa658d1821722de8b351c80c584db23))
* **presentation:** render icon and title of Structure tool in field action ([f617052](https://github.com/sanity-io/visual-editing/commit/f61705210035a151671899d0cfc4dd69e8b0e994))
* **presentation:** reset `id` and `type` when preview URL changes ([1c56063](https://github.com/sanity-io/visual-editing/commit/1c560631bd3f6ad4c6da30b274107e934c03b2ea))
* **presentation:** shorten search params ([38f30e1](https://github.com/sanity-io/visual-editing/commit/38f30e120dba0224d99f653e8cc1fd6842c1a253))
* **presentation:** show 'Open in Desk' only in header ([4619cbf](https://github.com/sanity-io/visual-editing/commit/4619cbf976e1945111196c20399762554297f85c))
* **presentation:** show navigator toggle correctly ([7c3e63c](https://github.com/sanity-io/visual-editing/commit/7c3e63c8ef99a2f26a2f754e5036a3d01a12fd13))
* **presentation:** structure tool resolver ([373af37](https://github.com/sanity-io/visual-editing/commit/373af373b14651f52c34c4147a341493ca6685a8))
* **presentation:** support multiple instances ([a49b1db](https://github.com/sanity-io/visual-editing/commit/a49b1db2341df5d33b4cd1354ff79f07b04d5462))
* **presentation:** update controls ui ([b02b327](https://github.com/sanity-io/visual-editing/commit/b02b3279e0ba9123ff338b11f28113fbd3684d27))
* **presentation:** update copy ([2d33d5a](https://github.com/sanity-io/visual-editing/commit/2d33d5a30f1bfd9dde6c0dc909e36255818b6c19))
* protect against race conditions ([1fd10ca](https://github.com/sanity-io/visual-editing/commit/1fd10cafd473c926c6471118c1b63a4e15f45941))
* quote query string ([90006be](https://github.com/sanity-io/visual-editing/commit/90006be863b388c688f659eb37dba8bb759a2ee2))
* re-enable shoe page ([1f1b984](https://github.com/sanity-io/visual-editing/commit/1f1b9845b69970e22da1127ef2abbffe3a4d1b97))
* **README:** add badges and links ([0fcf516](https://github.com/sanity-io/visual-editing/commit/0fcf516fb0a920c01cb4a153863d256e39395024))
* **README:** document SSR mode ([718f84a](https://github.com/sanity-io/visual-editing/commit/718f84a68fc5938363c865d0efee1649a7e53069))
* **refactor:** composer to pages ([#202](https://github.com/sanity-io/visual-editing/issues/202)) ([e46f475](https://github.com/sanity-io/visual-editing/commit/e46f475c50438339f5c95ccf3930f9d16c43dc4b))
* remove `@sanity/csm` references ([c77205b](https://github.com/sanity-io/visual-editing/commit/c77205befbd41a58ba00c2c8f58dc4158a2a2e0d))
* remove `@sanity/overlays` as peer dep ([5a2f806](https://github.com/sanity-io/visual-editing/commit/5a2f8063da3e03c3270af41db44a9e6456ac124b))
* remove `console.log` ([b84d3f3](https://github.com/sanity-io/visual-editing/commit/b84d3f3ebde6f1f6989da473fefad6acff57028f))
* remove `release-as` overrides ([5eb9a30](https://github.com/sanity-io/visual-editing/commit/5eb9a304ed26849281c23071381a4a78fc2e74c7))
* remove `sanity` peer dep ([30ff225](https://github.com/sanity-io/visual-editing/commit/30ff225255b587e92e020bca5cfda03f5577852b))
* remove `startTransition` option ([25268ed](https://github.com/sanity-io/visual-editing/commit/25268ed021a3743853ba673afe8ada91a562e21f))
* remove flicker during live preview warmup ([4c1c9e1](https://github.com/sanity-io/visual-editing/commit/4c1c9e1d9b712da16f92848ea69d4a12bc86f81b))
* remove initial url sender ([badda86](https://github.com/sanity-io/visual-editing/commit/badda8677af485467f469ef39f710566ba2908b4))
* remove peer dep on `@sanity/overlays` ([a627a80](https://github.com/sanity-io/visual-editing/commit/a627a80c4d75bcf70cbae267b3600dadebb37b2c))
* remove unnecessary context parameters ([cd89298](https://github.com/sanity-io/visual-editing/commit/cd892981761de14bf4b2134b53cc4f069404cd80))
* remove unused `@sanity/icons` package ([09c1954](https://github.com/sanity-io/visual-editing/commit/09c195409525fff03563ce973b36b14055d49fb9))
* remove unused `nanoid` dependency ([142b3dd](https://github.com/sanity-io/visual-editing/commit/142b3ddf9f30b0a7ab89471144a9bf091c31863f))
* remove unused code ([00e1366](https://github.com/sanity-io/visual-editing/commit/00e1366f161960d4ac58890c388f236432b6f981))
* remove unused dep `history` ([9fb2447](https://github.com/sanity-io/visual-editing/commit/9fb24478abb0bddacd0fbe369ec4956cfa1aaa09))
* remove unused dependency ([195e542](https://github.com/sanity-io/visual-editing/commit/195e5429d92f9d5198de54e30c33aa5bb5412715))
* rename `query` to `loadQuery` ([228dfc3](https://github.com/sanity-io/visual-editing/commit/228dfc3d2c5838d2124302e514ca9530ee92fbb8))
* renamed `studioUrl` to `allowStudioOrigin`to clarify it's CORS related ([589a7c2](https://github.com/sanity-io/visual-editing/commit/589a7c29ef61bb53f249847b4d5b9ae78ad252f2))
* report initial url on load due to draft mode redirects ([645fd05](https://github.com/sanity-io/visual-editing/commit/645fd05d3f4953fb9b03e3b56cc0af6350b5bede))
* resolve secrets properly when switching tools ([f8a12bf](https://github.com/sanity-io/visual-editing/commit/f8a12bf8c729c478bb6e224ac2de79077152544f))
* respect initial preview param on load ([7759481](https://github.com/sanity-io/visual-editing/commit/7759481a530465c069768188ec1667126c6a21eb))
* router stable ([e1d5778](https://github.com/sanity-io/visual-editing/commit/e1d5778b84a270cf799e6a5920736e7486b6e238))
* scope preview secrets per user ([26489b4](https://github.com/sanity-io/visual-editing/commit/26489b439ed6aae1f70d5861af8d97ca16220462))
* scroll into view if needed ([dfbbdbb](https://github.com/sanity-io/visual-editing/commit/dfbbdbb38ea9220cc820441c5e8f7296c44922fb))
* send initial URL on load ([3caf2e3](https://github.com/sanity-io/visual-editing/commit/3caf2e35511e4bfd7275131f2301b1f32742e70b))
* set `@sanity/core-loader` as typical dep ([3f2dd24](https://github.com/sanity-io/visual-editing/commit/3f2dd24de2e54007e7987f76c1e361852c6c5aa5))
* set `@sanity/core-loader` as typical dep ([cbda01c](https://github.com/sanity-io/visual-editing/commit/cbda01c70ce9f76c5f624a73ecdff7e094511619))
* set `tag` in `fetch` and `listen` methods ([4867aee](https://github.com/sanity-io/visual-editing/commit/4867aee5bd0f2b33445852ee7fcb17bd29804564))
* set `useCdn` based on cache settings ([8d22260](https://github.com/sanity-io/visual-editing/commit/8d22260db4b21a2790921a541407418f9a1059e4))
* set default `allowStudioOrigin` to same origin ([e1a115f](https://github.com/sanity-io/visual-editing/commit/e1a115f991930438fc968398a90f90f15de8b671))
* set initial `loading` to `false` when hydrated ([415c2f5](https://github.com/sanity-io/visual-editing/commit/415c2f582a4873c33371bd52a7848352c1bcb189))
* set initial `loading` to `false` when hydrated ([b18d0f5](https://github.com/sanity-io/visual-editing/commit/b18d0f55bff74975ebeca386b728271a7e731614))
* set initial hydrated state consistently ([4d9676c](https://github.com/sanity-io/visual-editing/commit/4d9676c95a7f32d4166828bbd643eb35570f97fe))
* set initial perspective correctly ([bf6e7a5](https://github.com/sanity-io/visual-editing/commit/bf6e7a54b1ef55d5fa47f5093815ce3255240cdf))
* set refreshInterval to 2s, from 10s ([397cb24](https://github.com/sanity-io/visual-editing/commit/397cb248f7f9b2fbbf203df5b35bcf1c035ad45c))
* show an error message if it takes too long to connect to the preview frame ([f0b4ca0](https://github.com/sanity-io/visual-editing/commit/f0b4ca039bf79b82374a84136fe2bc46560bedc9))
* stable "documents in use" rendering ([6e66f1d](https://github.com/sanity-io/visual-editing/commit/6e66f1dfb7838a08559579c925e04ab0bec76ecf))
* stop using the deprecated `simplifyPath` ([dfda670](https://github.com/sanity-io/visual-editing/commit/dfda67059ea3baa609f95ef5b63348acaca71ecb))
* strip relative paths from cors targetOrigin ([c2b5b3b](https://github.com/sanity-io/visual-editing/commit/c2b5b3b781af0852bfb798f96b9c685c15f90cc0))
* the `Unable to connect to overlays` message fired when it was in fact loaders that failed to connect ([65177ae](https://github.com/sanity-io/visual-editing/commit/65177aeb683ad53730e48f9c067888514e017efb))
* the build ([e01df01](https://github.com/sanity-io/visual-editing/commit/e01df01138691e4c51f818f7504b38ad761648a3))
* **types:** add `HistoryAdapterNavigate` exported type ([7e8340f](https://github.com/sanity-io/visual-editing/commit/7e8340f0b5313885b4205bad60f3b2db62f79309))
* update live queries whenever adding a new query ([fafb057](https://github.com/sanity-io/visual-editing/commit/fafb057c5dcd73fc08b30ae7e80ccf57be26e301))
* update node parser to ignore `projectId` and `dataset` ([d9fc6c3](https://github.com/sanity-io/visual-editing/commit/d9fc6c37a17df56f20cd6fc7150db63ce3b194e6))
* update stega implementation ([26cc0e7](https://github.com/sanity-io/visual-editing/commit/26cc0e7ed02bf194a16d337669895b02aa4b1922))
* update tests ([f1b5b83](https://github.com/sanity-io/visual-editing/commit/f1b5b83ac3a8cd0ba0d9f8fe6fe4976f5b35cd1d))
* URL preview param parsing ([30ee931](https://github.com/sanity-io/visual-editing/commit/30ee9316c76769c2e61a4d0df049adb1aa327b8b))
* use `createEditUrl ` from `@sanity/client` ([e83bb2b](https://github.com/sanity-io/visual-editing/commit/e83bb2bf28794477300d914e053d77b6ad1c07e4))
* use `getPublishedId` from `@sanity/client` ([2a75bdb](https://github.com/sanity-io/visual-editing/commit/2a75bdb5b0de32f7204ff5609951c7b3158f9bab))
* use `loadQuery` instead of `query` ([b855a7f](https://github.com/sanity-io/visual-editing/commit/b855a7f1c8e1e4f0f0debcba3b1da100e2509595))
* use `studioPath` utils from `@sanity/client/csm` ([a804364](https://github.com/sanity-io/visual-editing/commit/a80436410083ae88f6dc46a259ae3a08a7f4b59f))
* use canary version of `@sanity/client` ([2575715](https://github.com/sanity-io/visual-editing/commit/25757156fd25b5562070196ae054c4deeeb2cd1d))
* use new `ContentSourceMapParsedPathKeyedSegment` format ([20b3186](https://github.com/sanity-io/visual-editing/commit/20b31864815aeacb4c40e6cea5311d32805c6c2e))
* use shared utils from `@sanity/client` and `@sanity/groq-store` ([a4ba102](https://github.com/sanity-io/visual-editing/commit/a4ba10260982731e1929ce08dec414450233d549))
* use stega ([52c5533](https://github.com/sanity-io/visual-editing/commit/52c5533a892da2e396ff2e8637f239f37cb59b86))
* use the `resolveMapping` from `@sanity/client` ([0bb42d3](https://github.com/sanity-io/visual-editing/commit/0bb42d33b284246d0e8051611272541edee539e9))
* use the clean url in `handlePreviewPath` ([4e96e82](https://github.com/sanity-io/visual-editing/commit/4e96e8221524798c9b5525cb4e00238a805f1bee))
* use the new `@sanity/client/csm` utils ([7ffb21a](https://github.com/sanity-io/visual-editing/commit/7ffb21aaefea780690835cad07363ef995bb239b))
* use the same path utils everywhere ([a437719](https://github.com/sanity-io/visual-editing/commit/a4377194fdcaefddb3f199650aeb87a6989b0694))
* **useQuery:** snapshot state is now updated when initial changes ([#444](https://github.com/sanity-io/visual-editing/issues/444)) ([a0e2d38](https://github.com/sanity-io/visual-editing/commit/a0e2d3875dc9677b61fdaa4ab0c8ec85c244e3f1))
